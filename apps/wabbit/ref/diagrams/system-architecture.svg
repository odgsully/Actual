<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" width="1200" height="900">
  <defs>
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="rgba(255,255,255,0.5)" />
    </marker>

    <!-- Glow filter for key elements -->
    <filter id="glow-blue" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="4" result="blur" />
      <feFlood flood-color="#3b82f6" flood-opacity="0.3" result="color" />
      <feComposite in="color" in2="blur" operator="in" result="shadow" />
      <feMerge>
        <feMergeNode in="shadow" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <filter id="glow-purple" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="4" result="blur" />
      <feFlood flood-color="#8b5cf6" flood-opacity="0.3" result="color" />
      <feComposite in="color" in2="blur" operator="in" result="shadow" />
      <feMerge>
        <feMergeNode in="shadow" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <filter id="glow-orange" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="4" result="blur" />
      <feFlood flood-color="#f59e0b" flood-opacity="0.3" result="color" />
      <feComposite in="color" in2="blur" operator="in" result="shadow" />
      <feMerge>
        <feMergeNode in="shadow" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <filter id="glow-green" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="4" result="blur" />
      <feFlood flood-color="#10b981" flood-opacity="0.3" result="color" />
      <feComposite in="color" in2="blur" operator="in" result="shadow" />
      <feMerge>
        <feMergeNode in="shadow" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>

    <!-- Subtle background noise texture -->
    <filter id="noise">
      <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch" result="noise" />
      <feColorMatrix type="saturate" values="0" in="noise" result="grayNoise" />
      <feComponentTransfer in="grayNoise" result="fadedNoise">
        <feFuncA type="linear" slope="0.03" />
      </feComponentTransfer>
      <feMerge>
        <feMergeNode in="SourceGraphic" />
        <feMergeNode in="fadedNoise" />
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#0a0a0f" />
  <rect width="1200" height="900" fill="transparent" filter="url(#noise)" />

  <!-- ==================== TITLE (top-left) ==================== -->
  <text x="40" y="42" font-family="system-ui, -apple-system, sans-serif" font-size="28" font-weight="700" fill="#ffffff" letter-spacing="4">WABBIT</text>
  <text x="40" y="62" font-family="system-ui, -apple-system, sans-serif" font-size="13" fill="rgba(255,255,255,0.5)" letter-spacing="1">System Architecture</text>

  <!-- ==================== ROW 1: LAYER 1 — Normie ==================== -->
  <!-- Layer label -->
  <text x="20" y="120" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(59,130,246,0.6)" letter-spacing="2" transform="rotate(-90, 20, 120)">LAYER 1</text>

  <!-- Row 1 container hint line -->
  <line x1="55" y1="85" x2="55" y2="245" stroke="rgba(59,130,246,0.15)" stroke-width="1" />

  <!-- Layer 1 label bar -->
  <rect x="65" y="80" width="1115" height="22" rx="4" fill="rgba(59,130,246,0.08)" />
  <text x="75" y="95" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="rgba(59,130,246,0.7)" letter-spacing="1.5">NORMIE  /  USER-FACING</text>

  <!-- Box 1: Wabbit Web App -->
  <rect x="65" y="110" width="290" height="130" rx="12" fill="rgba(59,130,246,0.15)" stroke="rgba(59,130,246,0.3)" stroke-width="1" filter="url(#glow-blue)" />
  <text x="85" y="136" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#ffffff">Wabbit Web App</text>
  <text x="85" y="154" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.45)">Vite + React SPA</text>
  <circle cx="90" cy="177" r="2" fill="rgba(59,130,246,0.6)" />
  <text x="98" y="181" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">Gesture-driven ranking</text>
  <circle cx="90" cy="197" r="2" fill="rgba(59,130,246,0.6)" />
  <text x="98" y="201" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">Browse Wabbs &amp; leaderboards</text>
  <circle cx="90" cy="217" r="2" fill="rgba(59,130,246,0.6)" />
  <text x="98" y="221" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">PWA (vite-plugin-pwa)</text>

  <!-- Box 2: Landing Page -->
  <rect x="375" y="110" width="240" height="130" rx="12" fill="rgba(59,130,246,0.15)" stroke="rgba(59,130,246,0.3)" stroke-width="1" filter="url(#glow-blue)" />
  <text x="395" y="136" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#ffffff">Landing Page</text>
  <text x="395" y="154" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.45)">Astro 5 Static</text>
  <circle cx="400" cy="177" r="2" fill="rgba(59,130,246,0.6)" />
  <text x="408" y="181" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">SEO / GEO optimized</text>
  <circle cx="400" cy="197" r="2" fill="rgba(59,130,246,0.6)" />
  <text x="408" y="201" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">React Islands</text>

  <!-- Box 3: iOS App (dashed, future) -->
  <rect x="635" y="110" width="230" height="130" rx="12" fill="rgba(59,130,246,0.08)" stroke="rgba(59,130,246,0.3)" stroke-width="1" stroke-dasharray="6,4" />
  <text x="655" y="136" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="rgba(255,255,255,0.6)">iOS App</text>
  <text x="655" y="154" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.35)">SwiftUI (Phase 2+)</text>
  <circle cx="660" cy="177" r="2" fill="rgba(59,130,246,0.4)" />
  <text x="668" y="181" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.5)">Native haptics</text>
  <!-- Future badge -->
  <rect x="810" y="118" width="44" height="16" rx="8" fill="rgba(59,130,246,0.2)" />
  <text x="818" y="129" font-family="system-ui, -apple-system, sans-serif" font-size="8" font-weight="600" fill="rgba(59,130,246,0.7)">FUTURE</text>

  <!-- Box 4: Slack App (dashed, future) -->
  <rect x="885" y="110" width="195" height="130" rx="12" fill="rgba(59,130,246,0.08)" stroke="rgba(59,130,246,0.3)" stroke-width="1" stroke-dasharray="6,4" />
  <text x="905" y="136" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="rgba(255,255,255,0.6)">Slack App</text>
  <text x="905" y="154" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.35)">Phase 3 / Wave 5</text>
  <!-- Future badge -->
  <rect x="1025" y="118" width="44" height="16" rx="8" fill="rgba(59,130,246,0.2)" />
  <text x="1033" y="129" font-family="system-ui, -apple-system, sans-serif" font-size="8" font-weight="600" fill="rgba(59,130,246,0.7)">FUTURE</text>

  <!-- ==================== ROW 2: LAYER 2 — Agentic Coding ==================== -->
  <!-- Layer label -->
  <text x="20" y="340" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(139,92,246,0.6)" letter-spacing="2" transform="rotate(-90, 20, 340)">LAYER 2</text>

  <line x1="55" y1="270" x2="55" y2="430" stroke="rgba(139,92,246,0.15)" stroke-width="1" />

  <!-- Layer 2 label bar -->
  <rect x="65" y="265" width="1115" height="22" rx="4" fill="rgba(139,92,246,0.08)" />
  <text x="75" y="280" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="rgba(139,92,246,0.7)" letter-spacing="1.5">AGENTIC CODING  /  DEVELOPER</text>

  <!-- Box: Claude Code + MCP Server -->
  <rect x="65" y="295" width="1115" height="125" rx="12" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.3)" stroke-width="1" filter="url(#glow-purple)" />
  <text x="85" y="321" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#ffffff">Claude Code + MCP Server</text>
  <text x="85" y="339" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.45)">npm: wabbit-mcp-server</text>

  <!-- MCP Tools tag row -->
  <text x="85" y="365" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(139,92,246,0.7)" letter-spacing="0.5">7 MCP TOOLS:</text>
  <!-- Tool pills -->
  <rect x="170" y="354" width="90" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="183" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">search_wabbs</text>
  <rect x="268" y="354" width="68" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="281" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">get_wabb</text>
  <rect x="344" y="354" width="80" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="357" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">get_records</text>
  <rect x="432" y="354" width="100" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="445" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">submit_ranking</text>
  <rect x="540" y="354" width="100" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="553" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">get_leaderboard</text>
  <rect x="648" y="354" width="84" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="661" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">get_progress</text>
  <rect x="740" y="354" width="82" height="18" rx="9" fill="rgba(139,92,246,0.15)" stroke="rgba(139,92,246,0.25)" stroke-width="0.5" />
  <text x="753" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">create_wabb</text>

  <!-- Bullets row 2 -->
  <circle cx="90" cy="393" r="2" fill="rgba(139,92,246,0.6)" />
  <text x="98" y="397" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">Developer / builder interface</text>
  <circle cx="340" cy="393" r="2" fill="rgba(139,92,246,0.6)" />
  <text x="348" y="397" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">PostgREST direct access</text>

  <!-- ==================== ROW 3: LAYER 3 — Agent ==================== -->
  <!-- Layer label -->
  <text x="20" y="520" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(245,158,11,0.6)" letter-spacing="2" transform="rotate(-90, 20, 520)">LAYER 3</text>

  <line x1="55" y1="450" x2="55" y2="610" stroke="rgba(245,158,11,0.15)" stroke-width="1" />

  <!-- Layer 3 label bar -->
  <rect x="65" y="445" width="1115" height="22" rx="4" fill="rgba(245,158,11,0.08)" />
  <text x="75" y="460" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="rgba(245,158,11,0.7)" letter-spacing="1.5">AGENT  /  AUTONOMOUS</text>

  <!-- Box: OpenClaw Gateway -->
  <rect x="65" y="475" width="1115" height="125" rx="12" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.3)" stroke-width="1" filter="url(#glow-orange)" />
  <text x="85" y="501" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#ffffff">OpenClaw Gateway</text>
  <text x="85" y="519" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.45)">ws://127.0.0.1:18789</text>

  <!-- Skills tag row -->
  <text x="85" y="545" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(245,158,11,0.7)" letter-spacing="0.5">6 WABBIT SKILLS:</text>
  <!-- Skill pills -->
  <rect x="195" y="534" width="58" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="208" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">search</text>
  <rect x="261" y="534" width="46" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="274" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">rank</text>
  <rect x="315" y="534" width="68" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="328" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">progress</text>
  <rect x="391" y="534" width="84" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="404" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">leaderboard</text>
  <rect x="483" y="534" width="52" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="496" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">detail</text>
  <rect x="543" y="534" width="54" height="18" rx="9" fill="rgba(245,158,11,0.15)" stroke="rgba(245,158,11,0.25)" stroke-width="0.5" />
  <text x="556" y="546" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.65)">digest</text>

  <!-- Bullets -->
  <circle cx="90" cy="573" r="2" fill="rgba(245,158,11,0.6)" />
  <text x="98" y="577" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">24/7 persistent local agent</text>
  <circle cx="340" cy="573" r="2" fill="rgba(245,158,11,0.6)" />
  <text x="348" y="577" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.7)">Routes notifications &#x2192; WhatsApp / Telegram / Slack</text>

  <!-- ==================== ROW 4: SHARED DATA LAYER ==================== -->
  <!-- Layer label -->
  <text x="20" y="700" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="rgba(16,185,129,0.6)" letter-spacing="2" transform="rotate(-90, 20, 700)">SHARED</text>

  <line x1="55" y1="635" x2="55" y2="880" stroke="rgba(16,185,129,0.15)" stroke-width="1" />

  <!-- Layer label bar -->
  <rect x="65" y="635" width="1115" height="22" rx="4" fill="rgba(16,185,129,0.08)" />
  <text x="75" y="650" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="rgba(16,185,129,0.7)" letter-spacing="1.5">SHARED DATA LAYER</text>

  <!-- Supabase container -->
  <rect x="65" y="665" width="1115" height="210" rx="12" fill="rgba(16,185,129,0.15)" stroke="rgba(16,185,129,0.3)" stroke-width="1" filter="url(#glow-green)" />
  <text x="85" y="693" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#ffffff">Supabase</text>
  <text x="85" y="711" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.45)">PostgreSQL + Realtime + Auth + Storage + Edge Functions</text>

  <!-- Inner boxes -->
  <!-- Realtime -->
  <rect x="95" y="730" width="240" height="65" rx="8" fill="rgba(16,185,129,0.12)" stroke="rgba(16,185,129,0.2)" stroke-width="0.5" />
  <text x="115" y="755" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#ffffff">Realtime</text>
  <text x="115" y="775" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">WebSocket</text>

  <!-- PostgREST -->
  <rect x="355" y="730" width="240" height="65" rx="8" fill="rgba(16,185,129,0.12)" stroke="rgba(16,185,129,0.2)" stroke-width="0.5" />
  <text x="375" y="755" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#ffffff">PostgREST</text>
  <text x="375" y="775" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">REST API</text>

  <!-- Edge Functions -->
  <rect x="615" y="730" width="240" height="65" rx="8" fill="rgba(16,185,129,0.12)" stroke="rgba(16,185,129,0.2)" stroke-width="0.5" />
  <text x="635" y="755" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#ffffff">Edge Functions</text>
  <text x="635" y="775" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">Deno</text>

  <!-- Storage -->
  <rect x="875" y="730" width="270" height="65" rx="8" fill="rgba(16,185,129,0.12)" stroke="rgba(16,185,129,0.2)" stroke-width="0.5" />
  <text x="895" y="755" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#ffffff">Storage</text>
  <text x="895" y="775" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">S3-compatible</text>

  <!-- ==================== CONNECTION ARROWS ==================== -->

  <!-- Arrow 1: Web App (Layer 1) → Supabase -->
  <!-- Starts from bottom-center of Web App box, goes to top of Supabase -->
  <path d="M 210 240 L 210 260 Q 210 263 210 263 L 210 655"
        fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="1.5"
        marker-end="url(#arrowhead)" />
  <!-- Arrow label -->
  <rect x="120" y="615" width="180" height="16" rx="8" fill="rgba(10,10,15,0.8)" />
  <text x="130" y="627" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.55)">Realtime WS + PostgREST</text>

  <!-- Arrow 2: MCP Server (Layer 2) → Supabase -->
  <path d="M 622 420 L 622 655"
        fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="1.5"
        marker-end="url(#arrowhead)" />
  <!-- Arrow label -->
  <rect x="575" y="615" width="70" height="16" rx="8" fill="rgba(10,10,15,0.8)" />
  <text x="585" y="627" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.55)">PostgREST</text>

  <!-- Arrow 3: OpenClaw (Layer 3) → Supabase -->
  <path d="M 1000 600 L 1000 655"
        fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="1.5"
        marker-end="url(#arrowhead)" />
  <!-- Arrow label -->
  <rect x="880" y="615" width="200" height="16" rx="8" fill="rgba(10,10,15,0.8)" />
  <text x="890" y="627" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.55)">Realtime WS + Edge Functions</text>

  <!-- ==================== "PARALLEL CONSUMERS" annotation ==================== -->
  <text x="1180" y="628" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="rgba(255,255,255,0.25)" text-anchor="end" letter-spacing="1">PARALLEL CONSUMERS</text>

  <!-- ==================== Bottom credit line ==================== -->
  <text x="600" y="855" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.15)" text-anchor="middle">All three layers are parallel consumers of the shared Supabase data layer</text>
  <text x="600" y="870" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="rgba(255,255,255,0.1)" text-anchor="middle">Arrows indicate data flow direction &#x2014; layers do not depend on each other</text>

</svg>