# Actual/ Cleanup Checklist — 02.13.26

> Investigated by subagents against Vercel, Supabase, CI/CD, and all code references.
> **No deployment conflicts found. No Supabase conflicts. No broken cron jobs.**

---

## Target Root State

After all cleanup, the monorepo root should contain **only** these files/directories:

### Directories (9)

| Directory | Purpose |
|---|---|
| `apps/` | All Next.js applications (gs-site, growthadvisory, gsrealty-client, wabbit, wabbit-re) |
| `packages/` | Shared packages (auth, supabase, ui, utils) |
| `docs/` | Shared documentation |
| `node_modules/` | Dependencies (gitignored) |
| `.git/` | Git repository |
| `.github/` | GitHub workflows/config |
| `.husky/` | Git hooks |
| `.vercel/` | Vercel deployment config (gitignored) |
| `.claude/` | Claude Code configuration (partially tracked — config/docs tracked, `data/sessions/` gitignored) |

### Config files (~15)

| File | Purpose |
|---|---|
| `package.json` | Root monorepo manifest |
| `package-lock.json` | Dependency lock |
| `turbo.json` | Turborepo config |
| `.gitignore` | Git ignore rules |
| `.vercelignore` | Vercel ignore rules |
| `.eslintrc.json` | Root ESLint config |
| `vercel.json` | Primary Vercel config |
| `vercel.gsrealty.json` | GSRealty Vercel config |
| `vercel.pro.json` | Vercel Pro plan config |
| `.env.sample` | Environment template |
| `.env.local` / `.env.production` / `.env.vercel` | Environment files (gitignored) |

### Documentation (~6, all `.md`)

| File | Purpose |
|---|---|
| `README.md` | Project overview |
| `CLAUDE.md` | Claude Code instructions |
| `CONTRIBUTING.md` | Contribution guidelines |
| `MIGRATION_PROGRESS_TRACKER.md` | Active migration tracking |
| `MIGRATION_SAFETY_PROTOCOLS.md` | Safety procedures |
| `load-cap.md` | Capacity analysis (living reference) |

> **Note**: `02.13.26cleantime.md` (this file) will remain at root as an active checklist during cleanup. Move to `docs/archive/` after all steps are verified complete.

**Everything else at root must be moved into the appropriate `apps/` workspace or deleted.**

---

## Tier 1 — Zero Risk (auto-regenerated, ~1.6 GB) ✅ COMPLETE

- [x] **Delete `.turbo/` cache** (291 MB) — ✅ Done (Step 1, commit `07e5fd9`)
  - Turborepo cache, rebuilds automatically on next `build`
  - 2 files accidentally tracked by git — run `git rm -r --cached .turbo/`
  - `.turbo/` is **missing from `.gitignore`** — added in Step 0
- [x] **Delete all `.next/` directories** (~1.3 GB) — ✅ Done (Step 1)
  - `gs-site/.next` (606 MB), `gsrealty-client/.next` (331 MB), `growthadvisory/.next` (142 MB), `wabbit-re/.next` (107 MB), `wabbit/.next` (106 MB)
  - Already gitignored, not tracked
  - `vercel.gsrealty.json` references `.next` as `outputDirectory` but Vercel builds fresh — no conflict
  - `tsconfig.json` includes `.next/types/**/*.ts` — auto-regenerated on `dev`/`build`
- [x] **Delete all `.DS_Store` files** (21 files, trivial) — ✅ Done (Step 1)
  - Already in `.gitignore` + `.vercelignore`
- [x] **Delete `tsconfig.tsbuildinfo`** (144 KB) — ✅ Done (Step 1, commit `07e5fd9`)
  - TypeScript build cache, auto-regenerated
  - Added to `.gitignore` in Step 0
- [x] **Delete `~$CRM Buyer preferences.xlsx`** — ✅ Done (Step 1)

**Post-cleanup**: run `npm run dev` or `npm run build` to regenerate TypeScript types before coding.

---

## Tier 2 — Low Risk (verified safe, includes `git rm` on tracked files)

### Growthadvisory duplicate assets (4.3 MB)

- [x] **Delete 5 duplicate files from `apps/growthadvisory/assets/`** — ✅ Done (Step 8, gitignored, no commit needed)
  - `6735pvllc.png`, `lastmilelogistics.png`, `ga-logo.png`, `BASE+ROBOTICS+(3).webp`, `VelocityVolts_Logo.webp`
  - MD5 hashes confirmed identical to copies in `public/assets/`
  - 4 source files reference `/assets/` paths — these resolve to `public/assets/` at runtime in Next.js (no breakage)
  - `.gitignore` already marks `assets/` as deprecated
  - Verified: `lib/structured-data.ts`, `lib/marketing-data.ts`, `MarketingNav.tsx`, `MarketingFooter.tsx` all use `/assets/...` which Next.js serves from `/public/assets/`

### Legacy deployment files (Hetzner/PM2 — discontinued Jan 2025)

- [x] **Delete `ecosystem.config.js`** — ✅ Done (Step 7, commit `74d2edc`)
- [x] **Delete `deploy-phase4.sh`** — ✅ Done (Step 7)
- [x] **Delete `server-deploy.sh`** — ✅ Done (Step 7)
- [x] **Delete `deployment/deploy.sh`** — ✅ Done (Step 7, entire `deployment/` dir removed)
- [x] **Delete `deployment/server-setup.sh`** — ✅ Done (Step 7)
- [x] **Delete `scripts/rollback.sh`** — ✅ Done (Step 7)
- [x] **Delete `setup-demo-properties.sh`** — ✅ Done (Step 7, `DEMO_PROPERTIES_SETUP.md` updated inline)
  - `.vercelignore` (lines 41-44) covers `deployment/`, `ecosystem.config.js`, `server-deploy.sh` only. The other files (`deploy-phase4.sh`, `setup-demo-properties.sh`, `scripts/rollback.sh`, `scripts/run-rls-migration.mjs`) are NOT in `.vercelignore` but have zero code references and are safe to delete regardless.
  - Zero references in package.json, CI workflows, or active code
  - Only referenced in documentation (CLAUDE.md, RUNBOOK.md) as historical context
  - Update CLAUDE.md "Legacy Deployment Files" section after deletion

### Stale root-level planning docs & files

- [x] **Delete `git-clean.md`** — ✅ Done (Step 9, commit `b065d0c`)
- [x] **Delete `gs-site-merge-plan-2026-01-22.md`** — ✅ Done (Step 9)
- [x] **Delete `admin-security-merge-plan.md`** — ✅ Done (Step 9)
- [x] **Delete `git commit message 12.18.25`** — ✅ Done (Step 4, commit `b82b9ba`)
- [x] **Move `DASHBOARD_RESKIN_PLAN.md`** → `apps/wabbit-re/docs/` — ✅ Done (Step 10, commit `85d2f1e`)
- [x] **Move `DEVELOPMENT_PLAN.md`** → `apps/wabbit-re/docs/` — ✅ Done (Step 10)
- [x] **Move `GO-PLAN.md`** → `apps/gs-site/docs/` — ✅ Done (Step 10, moved to gs-site — it's a gs-site integrations doc, not wabbit-re)
- [x] **Move `rename-gsrealty-to-crm.md`** → `apps/gsrealty-client/docs/` — ✅ Done (Step 10, kept — rename still in planning phase)
- [x] **Move `growthadvisoryai-vercel.md`** → `apps/growthadvisory/docs/` — ✅ Done (Step 10)
- [x] **Move `Fix_explain_09.05.md`** → `docs/` — ✅ Done (Step 10)
- [x] **Move `USER_DELETION_GUIDE.md`** → `apps/wabbit-re/docs/` — ✅ Done (Step 10)
- [x] **Move `OPERATIONS_GUIDE.md`** → `apps/wabbit-re/docs/` — ✅ Done (Step 10)
- [x] **Move `BACKUP_ORGANIZATION_GUIDE.md`** → `docs/` — ✅ Done (Step 10)
- [x] **Move `PRE_MONOREPO_DOCUMENTATION.md`** → `docs/` — ✅ Done (Step 10)
- [x] **Move `test-verification-flow.md`** → `apps/wabbit-re/docs/` — ✅ Done (Step 10)
- [x] **Keep `load-cap.md`** — ✅ Kept at root (living reference doc)
  - All `.md` files blocked by `.vercelignore` — zero deployment impact

### Root migration duplicates

- [x] **Move root `/migrations/` directory** (10 files) → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 13)
  - Byte-for-byte identical to `apps/wabbit-re/migrations/`
  - Gitignored — not tracked, but should be relocated before deletion
- [x] **Delete root `/supabase/migrations/` placeholders** (5 empty 0-byte files) — ✅ Done (Step 13, entire root `supabase/` dir removed)
  - Abandoned Supabase CLI sync attempt — safe to delete
- [x] **`git rm` tracked `migrations/007_comprehensive_rls_policies.sql`** — ✅ Done (Step 12)
  - Git-tracked (not gitignored), identical to `supabase/migrations/20251218190000_comprehensive_rls_policies.sql`
  - Copy to `apps/wabbit-re/ref/sql/` before removing (same destination as the rest of root `/migrations/`)
- [x] **`git rm` tracked `supabase/migrations/20251218190000_comprehensive_rls_policies.sql`** — ✅ Done (Step 12)
  - Same content as `migrations/007` — duplicate tracked RLS file
  - **Canonical copy note:** This path follows the Supabase CLI naming convention (`supabase/migrations/YYYYMMDDHHmmss_*.sql`). A byte-identical copy also exists at `apps/gsrealty-client/supabase/migrations/20251218000000_comprehensive_rls_policies.sql` — that copy is the **canonical surviving migration** for gsrealty-client. The root copy and `migrations/007` are safe to remove because RLS is already applied (per MIGRATION_PROGRESS_TRACKER) and `apps/wabbit-re/ref/sql/` preserves a reference copy.
- [x] **`git rm scripts/run-rls-migration.mjs`** — ✅ Done (Step 7, commit `74d2edc`)
  - Hardcoded path to `migrations/007`; RLS already applied per MIGRATION_PROGRESS_TRACKER
  - Must be removed before/with the 007 file

### Orphaned root `app/admin/` (pre-monorepo legacy)

- [x] **`git rm -r app/admin/`** (5 tracked files: layout.tsx, page.tsx, clients/ pages) — ✅ Done (Step 14, commit `bb98d54`)
  - Zero references point here — all admin references go to `apps/gsrealty-client/app/admin/`
  - Legacy pre-monorepo admin UI, never migrated to an app workspace

### Orphaned root directories (not in any app workspace)

- [x] **Move `/clients/`** (77 KB, `client1.csv`) → `apps/wabbit-re/ref/data/` — ✅ Done (Step 5, commit `841bec0`)
- [x] **Delete `/dev_buildout/`** (~290 KB) — ✅ Done (Step 4, commit `b82b9ba`)
- [x] **Delete `/logs/`** (1.8 MB) — ✅ Done (Step 4, gitignored)
- [x] **Move `/supabase-backups-2025-01-15/`** → `/tmp/monorepo-cleanup-backup/` — ✅ Done (Step 6, gitignored, no commit)
- [x] **Delete `supabase-backup-2025-01-15.tar.gz`** — ✅ Done (Step 6, copied to `/tmp/` first)
- [x] **Evaluate `/tools/rapid-prototyping/`** — ✅ Kept as-is (Step 16). Self-contained tool with own `.git` repo, not a shared package. Gitignored, 5.1 MB, zero app references. Operates *on* the codebase, not *within* it.
- [x] **Delete `/_deprecated/`** — ✅ Done (Step 4)
- [x] **Move `CRM-Buyer-preferences.xlsx`** (10 KB) → `apps/wabbit-re/ref/data/` — ✅ Done (Step 5)

### Remaining root `scripts/` cleanup

- [x] **Audit remaining files in `/scripts/`** — ✅ Done (Step 15, commit `bbcb692`)
  - `scripts/verify-deployment.sh` → `apps/wabbit-re/scripts/` + `.github/workflows/deploy-production.yml` updated (atomic commit)
  - `scripts/verify-rls-policies.sql` → `apps/wabbit-re/ref/sql/`
  - `scripts/validate-cleanup-paths.sh` → `apps/wabbit-re/scripts/` (refactored line 20 to `git rev-parse --show-toplevel`)
  - ~~`scripts/delete-user.js`~~ — already at `apps/wabbit-re/scripts/delete-user.js`
  - Root `/scripts/` directory deleted (empty)

---

## Tier 3 — Low Risk (worth reviewing)

### Cross-app duplicate assets (~644 KB)

- [x] **Audit duplicates between `gsrealty-client` and `wabbit-re`** — ✅ Audited (Step 21). Deferred, no action taken.
  - `logo.png` (172 KB), `noise.png` (147 KB), `gradient.svg` (1 KB), `grid.svg` (2 KB) — MD5 confirmed identical (~322 KB total)
  - Both apps reference via `/assets/<filename>` — each needs its own copy in `public/assets/`
  - Centralizing requires a shared package + build-time copy step — moderate effort for minimal savings
  - **Decision: leave as-is.** Not worth the build tooling complexity for 322 KB

### Root SQL files (gitignored, on disk only) → **Move, not delete**

- [x] **Move `database-schema.sql`** → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 11, commit `22d2c2b`, moved last)
- [x] **Move `fix-rls-comprehensive.sql`** → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 11)
- [x] **Move `database-migration-temp-preferences.sql`** → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 11)
- [x] **Move `create-test-user.sql`** → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 11)
- [x] **Move `fix-auth-issues.sql`** → `apps/wabbit-re/ref/sql/` — ✅ Done (Step 11)
  - All already in `.gitignore` (line 44: `*.sql`)
  - Moving preserves history for reference; create `apps/wabbit-re/ref/sql/` directory first

### Root data files (12.5 MB+, gitignored) → **Move, not delete**

- [x] **Move `gbs_properties.pdf`** → `apps/wabbit-re/ref/data/` — ✅ Done (Step 5, commit `841bec0`)
- [x] **Move `gbs_properties.csv`** → `apps/wabbit-re/ref/data/` — ✅ Done (Step 5)
- [x] **Move `test_data_support.csv`** → `apps/wabbit-re/ref/data/` — ✅ Done (Step 5)
  - `CRM-Buyer-preferences.xlsx` also moves here — listed once in Tier 2 orphaned dirs (Step 5)

---

## Tier 4 — Expanded Opportunities (new findings)

### Temporary / dead files (~85 MB)

- [x] **Delete `apps/gsrealty-client/tmp/`** — ✅ Done (Step 2, commit `ed9cd62`, gitignored)
- [x] **Delete `apps/gsrealty-client/_scripts_WABBIT_RE_DO_NOT_USE/`** — ✅ Done (Step 2, 19 tracked files `git rm`'d. 7 broken `db:*` scripts removed from package.json. Stale tsconfig excludes cleaned.)
- [x] **Delete `apps/gs-site/ref/GA LOGO- 2/`** — ✅ Done (Step 2, 9 tracked files `git rm`'d)

### Empty directories

- [x] **Delete `/ref`** — ✅ Done (Step 2a, commit `ed9cd62`)
- [x] **Delete `apps/gsrealty-client/new-template/`** — ✅ Done (Step 2a)
- [x] **Delete `apps/gsrealty-client/test-results/`** — ✅ Done (Step 2a)
- [x] **Delete `apps/gsrealty-client/app/api/admin/upload/__tests__/test-output/`** — ✅ Done (Step 2a)

### Uncommitted deletions (already done locally, need commit)

- [x] **Commit `Wabbit-core/` deletion** — ✅ Done (Step 3, commit `71bc56e`)
- [x] **Commit `growth-advisory/` deletion** — ✅ Done (Step 3, commit `71bc56e`)

### Duplicate archive files

- [x] **Delete `apps/growthadvisory/assets/branding/GA LOGO-.zip`** — ✅ Done (Step 2b, commit `ed9cd62`)
- [x] **Delete `apps/wabbit/ref/files.zip`** — ✅ Done (Step 2b)

---

## Tier 5 — Dependency / Architecture Cleanup (needs audit)

### D3 packages in root `package.json`

- [ ] **Move 9 D3 libraries from root to BOTH `apps/gs-site/package.json` AND `apps/gsrealty-client/package.json`** (or keep at root)
  - `d3-array`, `d3-color`, `d3-format`, `d3-interpolate`, `d3-path`, `d3-scale`, `d3-shape`, `d3-time`, `d3-time-format`
  - Used by `gs-site` (recharts@2.15.4) AND `gsrealty-client` (recharts@2.12.7) via `victory-vendor` → D3
  - **Option A**: Move to both apps' `package.json` (cleaner isolation, slight duplication)
  - **Option B**: Keep at root (defensible since 2 apps share the dependency)

### Potentially unused dependencies (needs `grep` audit)

- [x] **`@playwright/test`** (devDep) in wabbit-re — no `.spec.ts`, `playwright.config`, or e2e test files found. Removed devDependency + dead `test:e2e` script. **`playwright` core package KEPT — it powers all 3 property scrapers** (`zillow-scraper.ts`, `redfin-scraper.ts`, `homes-scraper.ts`)
- [x] ~~**`playwright`** in gsrealty-client~~ — **KEEP BOTH `playwright` AND `@playwright/test`**: gsrealty-client has 3 active scrapers (same as wabbit-re) PLUS 11 E2E test specs in `tests/e2e/`. Both packages are actively used.
- [x] **`swr`** in wabbit-re + gsrealty-client — both use `@tanstack/react-query` instead. Zero imports confirmed, removed from both
- [x] **`node-cron`** in wabbit-re + gsrealty-client — confirmed zero imports in both apps. Vercel cron replaced this. Removed from both
- [x] **`zustand`**, **`framer-motion`**, **`embla-carousel-react`** in wabbit-re + gsrealty-client — zero imports found in BOTH apps (expanded scope from gsrealty-client-only to both). Removed from both. (**`jspdf` confirmed in use** — imported at `apps/gsrealty-client/app/admin/analytics/page.tsx:234` for PDF export. KEPT.)
- [x] ~~**`@notionhq/client`** in gsrealty-client~~ — **KEEP: actively used** by gsrealty admin calendar feature (`lib/notion/calendar.ts`, `app/api/admin/calendar/route.ts`, 5 calendar components). Full Notion CRUD for RealtyOne project tasks

### Duplicate API routes (code duplication)

- [x] **Audit shared routes between `wabbit-re` and `gsrealty-client`** — ✅ Audited (Step 21). Deferred, no action taken.
  - **14 routes** byte-for-byte identical: `/api/preferences/submit|load|save`, `/api/areas/update|delete|list|save`, `/api/admin/run-migration`, `/api/email/verify`, `/api/health`, `/api/properties/spatial`, `/api/scrape/test`, `/api/setup/complete|validate`
  - **7 routes** slightly diverged: `/api/auth/signup` (GR has full user creation), `/api/admin/delete-user` (GR has admin auth), `/api/admin/monitoring` (GR has `requireAdmin()`), 3 cron routes (GR has Next.js 15 async `headers()` fix), `/api/scrape/on-demand` (GR has rate limiting)
  - **9 lib files** also identical: `lib/database/{preferences,properties,property-manager,rankings,users}.ts`, `lib/map/spatial-queries.ts`, `lib/notifications/property-notifier.ts`, `lib/scraping/queue-manager.ts`, `lib/storage/image-optimizer.ts`
  - gsrealty-client is the **superset** (all 21 wabbit-re routes + 27 of its own). GR versions are the more evolved copies.
  - Scraping routes in gsrealty-client appear accidental — conceptually belong to wabbit-re only
  - **Decision: defer to future refactor.** Creating a shared API package affects both deployments and requires thorough testing. Not a cleanup-scope item.

---

## Doc Reference Updates (required after moves/deletions)

After removing files in each batch, update references in these docs. **This is the most error-prone part of cleanup — do not skip.**

| Moved/Deleted Item | Files Referencing It | Action |
|---|---|---|
| `migrations/007_*` | `MIGRATION_PROGRESS_TRACKER.md` (~lines 27, 671) | Update to note RLS was applied; remove path reference |
| `scripts/run-rls-migration.mjs` | Self-contained (no external refs found) | Safe to `git rm` directly |
| `scripts/rollback.sh` | `docs/RUNBOOK.md` (~lines 350, 353, 372) | Remove references from RUNBOOK; CI workflow does NOT reference this file |
| `scripts/delete-user.js` (moved) | `USER_DELETION_GUIDE.md` (~lines 71, 80, 174) | Update path to `apps/wabbit-re/scripts/delete-user.js` |
| `scripts/verify-deployment.sh` (moved) | `.github/workflows/deploy-production.yml` (~lines 149, 152), `MIGRATION_PROGRESS_TRACKER.md`, `docs/RUNBOOK.md` (~lines 260, 263, 375) | Update path to `apps/wabbit-re/scripts/verify-deployment.sh` |
| `setup-demo-properties.sh` | `apps/wabbit-re/docs/setup/DEMO_PROPERTIES_SETUP.md` (~lines 22, 163) | Update to note script was removed; inline steps or remove section |
| Legacy deploy files (`deployment/`, `ecosystem.config.js`, etc.) | `CLAUDE.md` (~lines 130-133), `README.md` (~lines 274-277), `docs/deployment/DEPLOYMENT_FIX_CONTEXT.md` | Update to note files were deleted; keep sections as historical context |
| `database-schema.sql` (moved) | `README.md` (~lines 167, 231, 296), `DEVELOPMENT_PLAN.md` (~line 18), `docs/supabase/SUPABASE_SETUP.md` (~lines 47, 126), `apps/wabbit-re/scripts/verify-setup.js` (~line 107), `apps/wabbit-re/docs/SCRAPING_SYSTEM_STATUS.md` (~line 114), `CLAUDE.md` (~line 220), `PRE_MONOREPO_DOCUMENTATION.md` (~line 176) | Update all paths to `apps/wabbit-re/ref/sql/database-schema.sql` |
| Root `migrations/` dir (moved) | `DEVELOPMENT_PLAN.md` (~line 19), `apps/wabbit-re/scripts/verify-setup.js` (~line 108), `apps/wabbit-re/scripts/setup-spatial.ts` (~line 56, **functional `readFileSync` — will crash if path wrong**; ~line 227, cosmetic console.log), `apps/wabbit-re/scripts/check-spatial-setup.ts` (~line 101, cosmetic console.log), `apps/wabbit-re/docs/SCRAPING_SYSTEM_STATUS.md` (~lines 34, 115, 165), `apps/wabbit-re/docs/setup/DEMO_PROPERTIES_SETUP.md` (~lines 39, 159), `setup-demo-properties.sh` (~lines 31, 39) | Update paths to `apps/wabbit-re/ref/sql/`. **Note:** `setup-spatial.ts` line 56 uses `process.cwd() + '/migrations/'` — works when Turborepo sets cwd to app dir (reads from local `apps/wabbit-re/migrations/` which stays untouched), but would break if run from repo root after root `migrations/` is deleted. Consider updating to `__dirname`-relative path for safety. |
| `fix-auth-issues.sql` (moved) | `apps/wabbit-re/docs/auth/AUTH_FIXES_SUMMARY.md` (~lines 7, 34, 51) | Update path to `apps/wabbit-re/ref/sql/fix-auth-issues.sql` |
| `DEVELOPMENT_PLAN.md` (moved) | `docs/deployment/DEPLOYMENT_SUCCESS.md` (~line 147) | Update path to `apps/wabbit-re/docs/DEVELOPMENT_PLAN.md` |
| `Fix_explain_09.05.md` (moved) | `CLAUDE.md` (~lines 70, 269), `README.md` (~line 307) | Update path to `docs/Fix_explain_09.05.md` |
| `test-verification-flow.md` (moved) | `CLAUDE.md` (~line 221), `README.md` (~line 303) | Update path to `apps/wabbit-re/docs/test-verification-flow.md` |
| `GO-PLAN.md` (moved) | `apps/gs-site/app/admin/page.tsx` (~line 68, comment), `apps/gs-site/app/admin/tiles/page.tsx` (~line 20, comment) | Update comments to reference new path |
| `growthadvisoryai-vercel.md` (moved) | `docs/deployment/VERCEL_ARCHITECTURE_DECISION_2026-01-11.md` (~line 387) | Update path to `apps/growthadvisory/docs/growthadvisoryai-vercel.md` |
| `PRE_MONOREPO_DOCUMENTATION.md` (moved) | `MIGRATION_PROGRESS_TRACKER.md` (~lines 356, 359) | Update path to `docs/PRE_MONOREPO_DOCUMENTATION.md` |
| `OPERATIONS_GUIDE.md` (moved) | Internal refs to `scripts/monitor-scraping.js`, `scripts/verify-setup.js`, `scripts/test-scrapers.js` | Update script paths after scripts move to `apps/wabbit-re/scripts/` |
| `USER_DELETION_GUIDE.md` (moved) | No external references found | No additional updates needed |
| `database-migration-temp-preferences.sql` (moved) | `README.md` | Update or remove reference |
| `apps/wabbit-re/tsconfig.json` (stale excludes) | Line 31: `"exclude": ["node_modules", "dev_buildout", "every cc [copy] copy", "scripts"]` | Remove `"dev_buildout"` (deleted in Step 4) and `"every cc [copy] copy"` (never existed). Keep `"node_modules"` and `"scripts"` |
| `apps/gsrealty-client/tsconfig.json` (stale excludes) | Exclude array includes `"_scripts_WABBIT_RE_DO_NOT_USE"` and `"_migrations_WABBIT_RE_DO_NOT_USE"` | Remove both entries after Step 2 deletes those directories. Also remove `"new-template"` (empty dir deleted in Step 2a) |
| `docs/POST_CLEANUP_STRUCTURE.md` (stale paths) | References many root artifacts being moved/deleted (~lines 168, 170, 171, 235, 247, 256) | Update all paths to post-cleanup locations; remove references to deleted items |
| `BACKUP_ORGANIZATION_GUIDE.md` (moved to `docs/`) | References `supabase-backups-2025-01-15/` and `.tar.gz` paths (~line 40+) | Update paths after Step 6 external backup move |
| `apps/wabbit-re/docs/WABBIT_RE_PRD.md` | References `CRM-Buyer-preferences.xlsx` (~line 79+) | Update path to `apps/wabbit-re/ref/data/CRM-Buyer-preferences.xlsx` after Step 5 move |
| `jspdf` in gsrealty-client | Used at `apps/gsrealty-client/app/admin/analytics/page.tsx:234` | **KEEP** — confirmed in use by analytics export. Remove from Tier 5 unused dep candidates |
| **`CLAUDE.md` (stays at root, needs major updates)** | ~44 lines across 9 sections: "Project Structure" (~24 lines, pre-monorepo dirs `/app`, `/components`, `/lib`, `/scripts` no longer at root), "Legacy Deployment Files" (~8 lines), "Architecture Overview" paths (6 lines need `apps/wabbit-re/` prefix), "Important Docs" (`database-schema.sql` ~line 220, `test-verification-flow.md` ~line 221), "Critical Context" (`Fix_explain_09.05.md` ~lines 70, 269), migrations path (~line 434) | Rewrite "Project Structure" for monorepo; update all moved file paths; rewrite "Legacy Deployment" as historical note |

---

## Rollback Strategy

1. ✅ **Create checkpoint branch** before starting: `git checkout -b cleanup-checkpoint`
2. **Per-batch commits** — one commit per Execution Order step for easy `git revert`
3. ✅ **Local backup for ALL gitignored files being moved/deleted**:
   ```bash
   mkdir -p /tmp/monorepo-cleanup-backup
   cp -r migrations/ /tmp/monorepo-cleanup-backup/
   cp -r supabase-backups-2025-01-15/ /tmp/monorepo-cleanup-backup/
   cp *.sql *.csv *.pdf *.xlsx /tmp/monorepo-cleanup-backup/
   cp -r clients/ dev_buildout/ logs/ /tmp/monorepo-cleanup-backup/
   cp supabase-backup-2025-01-15.tar.gz /tmp/monorepo-cleanup-backup/
   ```
4. **Test after each tier** — run `npm run build` after Tiers 1-3 to verify no breakage
5. **Verify CI** — after moving `scripts/verify-deployment.sh`, trigger a test deploy or check the GitHub Actions workflow still resolves the path
6. **Git-tracked file recovery** (`git rm` items):
   - All `git rm`'d files are recoverable from git history: `git checkout HEAD~1 -- <path>`
   - **Always copy to destination BEFORE running `git rm`** (Steps 12-14)
   - **Do NOT push to remote until ALL steps complete and `npm run build` passes** (Step 18)
   - If a `git rm` commit is wrong, revert with: `git revert <commit-sha>`
7. **Run validation script** after each batch:
   - `./scripts/validate-cleanup-paths.sh` from root (Steps 1-14)
   - After Step 15 (root `/scripts/` moved): `./apps/wabbit-re/scripts/validate-cleanup-paths.sh`
   - **IMPORTANT**: Before Step 15, refactor line 20 of `validate-cleanup-paths.sh` to use `git rev-parse --show-toplevel` instead of `$(cd "$(dirname "$0")/.." && pwd)`. The current dirname-based approach computes `REPO_ROOT` relative to the script's location — moving the script to `apps/wabbit-re/scripts/` would make `REPO_ROOT` resolve to `apps/wabbit-re/` instead of the monorepo root, breaking all repo-wide checks.
   - **Note**: `validate-cleanup-paths.sh` is currently untracked — `git add` it in Step 0 or Step 1 so it's available throughout cleanup

---

## Execution Order

| Step | Items | Space Saved | Risk | Notes |
|------|-------|-------------|------|-------|
| 0 | ✅ **Create `cleanup-checkpoint` branch** + local backup of gitignored files + `.gitignore` overhaul (see Step 0 details below) | — | — | Done: commit `e5f7f5e` |
| 1 | ✅ `git rm --cached` all newly-ignored tracked files (see Step 1 details below), then delete `.turbo/`, `.next/` (x5), `.DS_Store`, `tsconfig.tsbuildinfo`, `~$CRM*.xlsx` | **~1.6 GB** | Zero | Done: commit `07e5fd9` (30 files untracked) |
| 2 | ✅ `tmp/`, dead app scripts (`_scripts_WABBIT_RE_DO_NOT_USE/`), `apps/gs-site/ref/GA LOGO- 2/` | **~85 MB** | Zero | Done: commit `ed9cd62` |
| 2a | ✅ Empty dirs: `/ref`, `apps/gsrealty-client/new-template/`, `test-results/`, `test-output/` | trivial | Zero | Done: commit `ed9cd62` |
| 2b | ✅ Duplicate archives: `GA LOGO-.zip`, `apps/wabbit/ref/files.zip` | ~360 KB | Zero | Done: commit `ed9cd62` |
| 3 | ✅ Commit `Wabbit-core/` + `growth-advisory/` deletions + track 15 wabbit app files | cleaner git | Zero | Done: commit `71bc56e` |
| 4 | ✅ Delete stale root dirs: `/dev_buildout/`, `/logs/`, `/_deprecated/`, `git commit message 12.18.25` | **~2 MB** | Zero | Done: commit `b82b9ba` |
| 5 | ✅ Move root data files + `CRM-Buyer-preferences.xlsx` + `/clients/` → `apps/wabbit-re/ref/data/` | **~13 MB** freed | Zero | Done: commit `841bec0` |
| 6 | ✅ Move Supabase backups to external storage: `/supabase-backups-2025-01-15/` + `.tar.gz` | large | Zero | Done: no commit (gitignored) |
| 7 | ✅ Legacy deployment files + `setup-demo-properties.sh` + `scripts/run-rls-migration.mjs` + `scripts/rollback.sh`. **Also update `DEMO_PROPERTIES_SETUP.md` and `docs/RUNBOOK.md` inline** | **~30 KB** | Low | Done: commit `74d2edc` |
| 8 | ✅ Growthadvisory asset dedup | **4.3 MB** | Zero | Done: no commit (gitignored) |
| 9 | ✅ Stale planning docs: DELETE 3 (`git-clean`, `gs-site-merge-plan`, `admin-security-merge-plan`). `git commit message` already deleted in Step 4. **Keep `load-cap.md`** | ~1,200 lines | Zero | Done: commit `b065d0c` |
| 10 | ✅ Move 11 planning docs to app workspaces (see Tier 2 list). GO-PLAN.md → `gs-site/docs/` (corrected) | cleaner root | Zero | Done: commit `85d2f1e` |
| 11 | ✅ Root SQL files → **move** to `apps/wabbit-re/ref/sql/`. `database-schema.sql` moved LAST | ~11 KB freed | Low | Done: commit `22d2c2b` |
| 12 | ✅ **Copy** `migrations/007` + `supabase/migrations/20251218*` to `ref/sql/` first, THEN `git rm` both. **Note:** canonical RLS migration survives at `apps/gsrealty-client/supabase/migrations/20251218000000_*` — root copies are reference duplicates only | cleaner git | Low | Done: ref copies preserved, both root dupes `git rm`'d |
| 13 | ✅ Move gitignored root `/migrations/` (remaining 10 files) → `apps/wabbit-re/ref/sql/`, delete root `/supabase/` dir (placeholders + `.temp/`) | cleaner root | Zero | Done: no commit (all gitignored) |
| 14 | ✅ `git rm -r app/admin/` (orphaned pre-monorepo legacy) | 5 files (1,409 lines) | Low | Done: commit `bb98d54` |
| 15 | ✅ Refactored `validate-cleanup-paths.sh` REPO_ROOT, moved all 3 scripts to app workspaces, updated CI workflow path — all in one atomic commit. Root `/scripts/` deleted | cleaner root | Low | Done: commit `bbcb692` |
| 16 | ✅ Evaluated `/tools/rapid-prototyping/` — kept as-is (own `.git` repo, gitignored, not a shared package) | n/a | Zero | No commit needed (gitignored) |
| 17 | ✅ Updated all doc references (~50 edits across ~15 files). CLAUDE.md rewritten: Project Structure, Legacy Deployment, paths. README, MIGRATION_PROGRESS_TRACKER, RUNBOOK, PRD, tsconfig excludes, runtime scripts all updated | — | Zero | Done |
| 18 | ✅ Build verification: gs-site ✅, growthadvisory ✅. wabbit-re ✗ (pre-existing: missing `dd-trace`), gsrealty-client ✗ (pre-existing: type error in campaign-spend). Validation script: 2 false positives (stale check logic). **No regressions from cleanup.** | — | — | Pre-existing failures documented |
| 19 | ✅ D3 dependencies — kept at root (Option B). Both gs-site + gsrealty-client use recharts → D3; hoisting works correctly, no benefit to moving | n/a | Zero | No change needed |
| 20 | ✅ Unused dependency audit: removed `@playwright/test` + `test:e2e` script from **wabbit-re**; removed `swr` from wabbit-re + gsrealty-client; removed `node-cron` from wabbit-re + gsrealty-client; removed `zustand`, `framer-motion`, `embla-carousel-react` from **both** wabbit-re + gsrealty-client (all three confirmed zero imports in both apps). **KEPT:** `playwright` core in both apps, `@playwright/test` in gsrealty-client (11 E2E specs), `@notionhq/client` in gsrealty-client (calendar CRUD). 6 packages removed from lockfile. | n/a | Low | Done: Feb 2026 |
| 21 | ✅ Cross-app asset centralization + duplicate API routes audit — audited, both deferred. Assets: 4 files (322 KB), leave as-is. Routes: 21 shared (14 identical, 7 diverged) + 9 identical lib files — defer to future shared-package refactor | n/a | n/a | Done: audited Feb 2026, no code changes |

**Total recoverable: ~1.7 GB + ~15 MB from root + dramatically cleaner monorepo structure**
**Post-cleanup root: ~9 directories, ~14 config files, ~6 docs (see Target Root State)**

---

## Step 0 Details — `.gitignore` Overhaul ✅ COMPLETE

> **Completed**: Feb 14, 2026 — commit `e5f7f5e`
> Branch: `cleanup-checkpoint`, backup at `/tmp/monorepo-cleanup-backup/`

The monorepo-wide gitignore audit (Feb 2026) found **6 categories of issues**. All fixes go into Step 0 before any cleanup begins.

### 0a. Create checkpoint branch + local backup ✅

```bash
git checkout -b cleanup-checkpoint
mkdir -p /tmp/monorepo-cleanup-backup
cp -r migrations/ /tmp/monorepo-cleanup-backup/
cp -r supabase-backups-2025-01-15/ /tmp/monorepo-cleanup-backup/
cp *.sql *.csv *.pdf *.xlsx /tmp/monorepo-cleanup-backup/
cp -r clients/ dev_buildout/ logs/ /tmp/monorepo-cleanup-backup/
cp supabase-backup-2025-01-15.tar.gz /tmp/monorepo-cleanup-backup/
```

### 0b. Add missing `.gitignore` rules ✅

Add these to the root `.gitignore`:

```gitignore
# Build caches (was missing — 2 .turbo files + 2 tsbuildinfo tracked)
.turbo/
**/tsconfig.tsbuildinfo

# Test coverage output (gsrealty-client had 20 coverage/ files tracked)
**/coverage/

# Office temp/lock files (gsrealty-client had ~$-realty-client-SOP.docx tracked)
~$*

# Backup files (gs-site had page.tsx.marketing.bak tracked)
*.bak

# Auto-generated by Next.js (3 tracked across growthadvisory, gsrealty-client, wabbit-re)
next-env.d.ts

# Cleanup plan destination directory (gitignored data files — purely reference, not source)
# This directory is FULLY ignored — no files here will be tracked.
# If a README or docs are needed inside ref/data/, add: !apps/wabbit-re/ref/data/*.md
apps/wabbit-re/ref/data/
```

### 0c. Fix `*.sql` blanket ignore — un-ignore migration files ✅

The root `.gitignore` line 44 has `*.sql` which hides **60 SQL files** across every app, including active Supabase migrations. Add negation rules immediately after `*.sql`:

```gitignore
# Database dumps/ad-hoc scripts (keep this)
*.sql

# BUT track migration and schema files across all apps
!**/migrations/**/*.sql
!**/supabase/migrations/**/*.sql
!**/supabase/*.sql
!**/safety-docs/*.sql
!**/ref/sql/**/*.sql
!**/jarvis-integration/*.sql
!database-schema.sql
!scripts/*.sql
!**/scripts/*.sql
```

> **Why these rules (audit-verified Feb 2026):**
> - `!**/migrations/**/*.sql` — app migrations (gs-site, wabbit-re, gsrealty-client)
> - `!**/supabase/migrations/**/*.sql` — Supabase CLI migrations
> - `!**/supabase/*.sql` — utility scripts in supabase dirs (e.g., `verify_tables.sql`). Slightly broad — may un-ignore test scripts; acceptable tradeoff.
> - `!**/safety-docs/*.sql` — gsrealty-client safety documentation
> - `!**/ref/sql/**/*.sql` — **post-cleanup destination** for all moved SQL/migration files (Steps 11-13)
> - `!**/jarvis-integration/*.sql` — gs-site jarvis schema
> - `!database-schema.sql` — root schema file (temporary; becomes dead after Step 11 move, but covered by `!**/ref/sql/**/*.sql` at new path)
> - `!scripts/*.sql` + `!**/scripts/*.sql` — root `scripts/verify-rls-policies.sql` + app-level script SQL files
>
> **Not covered (intentional):** 4 loose root SQL files (`create-test-user.sql`, `fix-auth-issues.sql`, `fix-rls-comprehensive.sql`, `database-migration-temp-preferences.sql`) stay ignored until Step 11 moves them to `ref/sql/` where `!**/ref/sql/**/*.sql` picks them up.

**SQL files by app that become visible after this fix:**

| App | Count | Files |
|-----|-------|-------|
| gs-site | 12 | 7 app migrations, 3 supabase migrations, 1 jarvis schema, 1 other |
| gsrealty-client | 8 active | 6 supabase migrations, 1 safety doc, 1 verify script (10 legacy `_DO_NOT_USE` also visible but being deleted in Step 2) |
| wabbit-re | 11 | 10 app migrations, 1 script |
| wabbit | 1 | ref/schema.sql |
| Root | 12 | Being moved/deleted in Steps 11-13 anyway |

### 0d. Create destination directories ✅

```bash
mkdir -p apps/wabbit-re/ref/sql
mkdir -p apps/wabbit-re/ref/data
mkdir -p apps/gsrealty-client/docs
mkdir -p apps/growthadvisory/docs
```

### 0e. Commit Step 0 + verify ✅

Commit the `.gitignore` changes BEFORE any file moves/deletes, so that the newly un-ignored SQL files get picked up cleanly.

```bash
git add .gitignore
git commit -m "chore: overhaul .gitignore — fix SQL blanket ignore, add build cache rules"
```

**Verified post-commit:**
- ✅ 35 SQL files now appear as untracked (`??`) — negation rules working
- ✅ Build artifacts covered by new ignore rules
- ✅ Commit `e5f7f5e` created on `cleanup-checkpoint` branch

---

## Step 1 Details — Untrack Mis-tracked Files ✅ COMPLETE

> **Completed**: Feb 14, 2026 — commit `07e5fd9` (30 files, 19,623 deletions)

After the `.gitignore` is updated, remove these from git tracking (files stay on disk):

```bash
# Build caches
git rm -r --cached .turbo/
git rm --cached tsconfig.tsbuildinfo
git rm --cached apps/gsrealty-client/tsconfig.tsbuildinfo

# Test coverage
git rm -r --cached apps/gsrealty-client/coverage/

# Office temp file
git rm --cached "apps/gsrealty-client/~\$-realty-client-SOP.docx"

# Backup file
git rm --cached apps/gs-site/app/page.tsx.marketing.bak

# Personal contacts file (.gitignore already has *.vcf)
git rm --cached apps/gs-site/apple-contacts-12.25.25.vcf

# Auto-generated Next.js type files
git rm --cached apps/growthadvisory/next-env.d.ts
git rm --cached apps/gsrealty-client/next-env.d.ts
git rm --cached apps/wabbit-re/next-env.d.ts
```

**Total: 30 files untracked** (2 turbo + 2 tsbuildinfo + 20 coverage + 1 office temp + 1 bak + 1 vcf + 3 next-env).

Then proceed with the existing Step 1 deletions: `.turbo/`, `.next/` (x5), `.DS_Store` (x22), `tsconfig.tsbuildinfo`, `~$CRM*.xlsx`.

**Additional findings to address in Step 1 (or note for later):**

| Item | Action | Priority |
|------|--------|----------|
| gs-site duplicate profile pics (`agent-team/` AND `public/agent-team/`) | Remove `agent-team/` (non-public copy), keep `public/agent-team/` — saves ~8 MB | Step 2 or separate |
| gs-site `ref/GA LOGO- 2/` (10.6 MB EPS files) | Already in Step 2 for deletion | Step 2 |
| gsrealty-client `data-overlap/mozingo-propertyradar-ex.xlsx` (4.7 MB) | Evaluate: reference data or one-off? | Post-cleanup |
| growthadvisory 2 large PNGs (~4 MB) | Client logos, actively used — optimize/compress later | Post-cleanup |
| `apps/wabbit-re/UI Prompts for Wabbit RE.docx` | `git add` or add `*.docx` to `.gitignore` | Step 1 |
| Sub-app `package-lock.json` (gs-site, gsrealty-client, wabbit-re) | Evaluate: if root lockfile is canonical, remove with `git rm --cached` and add `apps/*/package-lock.json` to `.gitignore` | Post-cleanup |

**Wabbit 16 untracked files — specific actions (Step 3, with wabbit-core commit):**

| File | Action |
|------|--------|
| `apps/wabbit/CLAUDE.md` | `git add` — app-specific Claude instructions |
| `apps/wabbit/Wabbit-Build-Notion-1.28.25.md` | `git add` — planning doc |
| `apps/wabbit/v2BUILD_PLAN.md` | `git add` — active build plan |
| `apps/wabbit/ref/README.md` | `git add` — reference index |
| `apps/wabbit/ref/RankingGestureView.swift` | `git add` — iOS reference code |
| `apps/wabbit/ref/page.tsx` | `git add` — UI reference |
| `apps/wabbit/ref/core/Wabbit-webapp.md` | `git add` — architecture doc |
| `apps/wabbit/ref/docs/TASKS.md` | `git add` — task tracking |
| `apps/wabbit/ref/docs/PRD.md` | `git add` — product requirements |
| `apps/wabbit/ref/docs/INTEGRATIONS.md` | `git add` — integration specs |
| `apps/wabbit/ref/docs/ARCHITECTURE.md` | `git add` — architecture doc |
| `apps/wabbit/ref/docs/GLOSSARY.md` | `git add` — glossary |
| `apps/wabbit/ref/diagrams/data-event-flow.svg` | `git add` — architecture diagram |
| `apps/wabbit/ref/diagrams/system-architecture.svg` | `git add` — architecture diagram |
| `apps/wabbit/ref/diagrams/database-erd.svg` | `git add` — ERD diagram |
| `apps/wabbit/ref/files.zip` | **DELETE** — marked for deletion in Tier 4 (Step 2b) |
| `apps/wabbit/ref/.DS_Store` (x2) | **DELETE** — handled by Step 1 `.DS_Store` cleanup |

---

## Pre-Existing Issues (discovered during audit, not caused by cleanup)

> These are NOT part of the cleanup scope but are documented here for awareness.

| Issue | Detail | Severity |
|-------|--------|----------|
| **`seed-database.ts` missing (both apps)** | `apps/wabbit-re/package.json` defines `"db:seed": "tsx scripts/seed-database.ts"` and `apps/gsrealty-client/package.json` defines `"db:seed": "tsx scripts/seed-database.ts"` — both files do not exist. Dead npm scripts in both apps. | Low |
| **Playwright can't run on Vercel** | `playwright` requires Chromium binary (~200 MB) which exceeds Vercel serverless size limits. Scraping cron jobs (`hourly-scrape`, `daily-cleanup`, `check-health`) likely fail silently in production. | High (pre-existing) |
| **GA LOGO web exports unique to gs-site** | `apps/gs-site/ref/GA LOGO- 2/` contains 5 PNG/SVG files not duplicated in `growthadvisory/assets/branding/` (`.ai`/`.eps` source files ARE duplicated). The PNGs/SVGs have zero code references but are unique exports. | Info |
| **7 broken `db:*` scripts in gsrealty-client** | `package.json` defines `db:seed`, `db:seed-demo`, `db:update-demo`, `db:seed-data`, `db:seed-live-demo`, `db:setup-spatial`, `db:check-spatial` — all point to `scripts/` files that don't exist (`db:seed` target `seed-database.ts` never existed; others only existed in `_scripts_WABBIT_RE_DO_NOT_USE/`). Already broken before cleanup. | Low |
| **gsrealty-client `data-overlap/` (8.9 MB, 18 tracked files)** | Reference data for PropertyRadar field alignment. Zero code references. Not addressed in cleanup plan — consider for future pass. | Info |
| **gsrealty-client rename to CRM not executed** | `rename-gsrealty-to-crm.md` is a 1,095-line plan in planning phase only. Pre-flight checklist incomplete, approval unsigned. App is still `gsrealty-client`. | Info |

---
